<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <changeSet id="disposition-20180510-001" author="netposa" context="base">
        <comment>1400布控实体</comment>
        <sql>
            CREATE TABLE `disposition` (
            `UUID`  varchar(36) NOT NULL COMMENT 'MYSQL自动生成UUID',
            `DispositionID`			  varchar(36) NOT NULL COMMENT '布控标识;该布控标识符，数据服务接口调用时由VIID生成，级联接口调用时不可为空，撤控时必选',
            `Title`					  varchar(36) default NULL COMMENT '布控标题;描述布控的主题和目标，布控时必选',
            `DispositionCategory`	  varchar(36) default NULL COMMENT '布控类别;人员、人脸、机动车、非机动车、关键字等布控时必选',
            `TargetFeature`			  varchar(36) default NULL COMMENT '布控对象特征;1、采用多个键值对” ((Key1=Value1) and(Key2=Value2)) or (Key3=Value3)”的公式来表示与类别对应的细化条件；2、Key的取值来源于PropertyType（附录B有详细定义）；3、支持模糊布控：正则表达式符号“?、*、and 、or、()”等常见的正则表达式字符;4、公式中所涉标点符号均为英文半角;布控时必选',
            `TargetImageURI`		  varchar(36) default NULL COMMENT '布控对象图像;图像路径，以目标图像特征进行布控时使用',
            `PriorityLevel`			  int default NULL COMMENT '布控优先级;取值范围为1～3，1表示最高',
            `ApplicantName`			  varchar(36) default NULL COMMENT '申请人;布控时必选',
            `ApplicantInfo`			  varchar(36) default NULL COMMENT '申请人联系方式;个人或单位的手机号、邮箱等联系方式',
            `ApplicantOrg`			  varchar(36) default NULL COMMENT '申请单位;申请单位名称， 布控时必选',
            `BeginTime`				  varchar(36) default NULL COMMENT '开始时间;布控时必选',
            `EndTime`				  varchar(36) default NULL COMMENT '创建时间;布控时必选',
            `CreatTime`				  varchar(36) default NULL COMMENT '布控操作类型；系统自动生成',
            `OperateType`			  int default NULL COMMENT '布控执行状态；0：布控中1：已撤控2：布控到期9：未布控;该字段只读',
            `DispositionStatus`		  int default NULL COMMENT '布控范围；1:卡口；2：区域布控布控时必选',
            `DispositionRange`		  varchar(36) default NULL COMMENT '布控卡口；卡口时使用；可带多个卡口ID，多个以”;”间隔(英文半角分号，下同)；可定位到下级视图库',
            `TollgateList`			  varchar(36) default NULL COMMENT '布控行政区代码；区域布控使用(DispositionRange为2)；实际需要执行布控的行政区域代码，县际联动填6位行政区号码（GB/T2260规定），地市联动填4位行政区号码，省际联动填2位行政区号码，多个区域间以”;”级联接口根据布控行政区代码找到下级视图库',
            `DispositionArea`		  varchar(36) default NULL COMMENT '告警信息接收地址；告警信息接收地址URL，级联接口时该地址控制直接接收还是逐级转发',
            `ReceiveAddr`			  varchar(36) default NULL COMMENT '告警信息接收手机号；多个号码间以英文半角分号”;”间隔，如“139571xxxxx;139572xxxxx”',
            `ReceiveMobile`			  varchar(36) default NULL COMMENT '理由；进行该布控的理由',
            `Reason`				  varchar(36) default NULL COMMENT '撤控单位名称；仅在撤销布控时使用',
            `DispositionRemoveOrg`	  varchar(36) default NULL COMMENT '撤控人;仅在撤销布控时使用',
            `DispositionRemovePerson` varchar(36) default NULL COMMENT '撤控时间;仅在撤销布控时使用',
            `DispositionRemoveTime`	  varchar(36) default NULL COMMENT '撤控原因;仅在撤销布控时使用',
            `DispositionRemoveReason` varchar(36) default NULL COMMENT '图像列表;可以包含0个或者多个子图像对象',
            `Ext1`		  varchar(36) default NULL COMMENT '预留字段1',
            `Ext2`		  varchar(36) default NULL COMMENT '预留字段2',
            `Ext3`		  varchar(36) default NULL COMMENT '预留字段3',
            PRIMARY KEY (`UUID`,`DispositionID`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="disposition_notification-20180515-001" author="netposa" context="base">
        <comment>1400告警实体</comment>
        <sql>
            CREATE TABLE `disposition_notification` (
            `UUID`  varchar(36) NOT NULL COMMENT 'MYSQL自动生成UUID',
            `NotificationID`  varchar(36) NOT NULL COMMENT '告警标识 ,该布控告警标识符',
            `DispositionID`  varchar(36) default NULL COMMENT '布控标识 ,布控标识',
            `Title`  varchar(36) default NULL COMMENT '布控标题 ,描述布控的主题和目标',
            `TriggerTime`  varchar(36) default NULL COMMENT '触发时间 ',
            `CntObjectID`  varchar(36) default NULL COMMENT '信息标识 ,自动采集过车或过人记录ID',
            `PersonObjectID`  varchar(36) default NULL COMMENT '人员	   ,自动采集的人员数据，结构',
            `MotorVehicleObjectID`  varchar(36) default NULL COMMENT '车辆	   ,自动采集的车辆数据，结构，过车信息必选',
            `Ext1`		  varchar(36) default NULL COMMENT '预留字段1',
            `Ext2`		  varchar(36) default NULL COMMENT '预留字段2',
            `Ext3`		  varchar(36) default NULL COMMENT '预留字段3',
            PRIMARY KEY (`UUID`,`NotificationID`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
</databaseChangeLog>